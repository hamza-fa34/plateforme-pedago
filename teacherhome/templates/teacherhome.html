{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}
{% block title %}Espace Enseignant – Plateforme Pédagogique{% endblock %}

{% block content %}
<div class="dashboard-container">
  <!-- En-tête de page -->
  {% include 'partials/page_header.html' with title="Accueil Enseignant" welcome_user=user.first_name|default:user.username %}

  <div class="dashboard-main-content">
    <!-- Section Liste des ressources -->
    <section class="resources-table-section content-col">
      <header class="list-header">
        <h3><i class="fas fa-folder-open"></i> Mes ressources</h3>
      </header>
            {% include 'partials/resource_table.html' with files_data=files_data is_teacher_view=True caption="Liste de mes ressources" %}
    </section>

    <!-- Section Upload -->
    <aside class="form-card-container">
      <h2><i class="fas fa-upload"></i> Ajouter une ressource</h2>
      <form method="post"
            action="{% url 'upload_form' %}"
            enctype="multipart/form-data"
            class="form upload-form">
        {% csrf_token %}
        <div class="form-group">
          <label for="{{ form.title.id_for_label }}">Titre</label>
          <input type="text"
                 name="{{ form.title.name }}"
                 id="{{ form.title.id_for_label }}"
                 class="form-control"
                 maxlength="255"
                 placeholder="Titre de la ressource">
        </div>
        <div class="form-group">
          <label for="{{ form.subject.id_for_label }}">Matière</label>
          <input type="text"
                 name="{{ form.subject.name }}"
                 id="{{ form.subject.id_for_label }}"
                 class="form-control"
                 maxlength="100"
                 placeholder="Matière (ex: Mathématiques)">
        </div>
        <div class="form-group">
          <label for="{{ form.level.id_for_label }}">Niveau</label>
          <input type="text"
                 name="{{ form.level.name }}"
                 id="{{ form.level.id_for_label }}"
                 class="form-control"
                 maxlength="100"
                 placeholder="Niveau (ex: Licence 1)">
        </div>
        <div class="form-group">
          <label for="{{ form.resource_type.id_for_label }}">Type</label>
          <input type="text"
                 name="{{ form.resource_type.name }}"
                 id="{{ form.resource_type.id_for_label }}"
                 class="form-control"
                 maxlength="50"
                 placeholder="Type (ex: Cours, TD, TP)">
        </div>
        <div class="form-group">
          <label for="{{ form.file.id_for_label }}">Fichier</label>
          <input type="file"
                 name="{{ form.file.name }}"
                 id="{{ form.file.id_for_label }}"
                 class="form-control"
                 accept=".pdf,.doc,.docx,.ppt,.pptx,.txt,.zip,.rar"
                 required>
        </div>
        <div class="form-group">
          <label for="{{ form.permission.id_for_label }}">Permission</label>
          <select name="{{ form.permission.name }}"
                  id="{{ form.permission.id_for_label }}"
                  class="form-control">
            <option value="1">Public</option>
            <option value="0">Privé</option>
          </select>
        </div>
        <button type="submit" class="btn btn-primary btn-upload">
          <i class="fas fa-upload"></i> Upload
        </button>
      </form>
    </aside>
  </div>
</div>
{% endblock %}

{% block extra_body %}
<script src="{% static 'teacherhome/teacherhome.js' %}"></script>
{% endblock %}
