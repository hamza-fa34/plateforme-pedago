{% extends 'base.html' %}
{% load static %}
{% block title %}Inscription - Plateforme Pédagogique{% endblock %}
{% block content %}
<div class="split-container">
  <div class="split-left">
    <img src="{% static 'signup.png' %}" alt="Illustration inscription" class="split-illustration">
    <h1 class="split-title">Plateforme Pédagogique</h1>
    <p class="split-subtitle">Créez votre compte pour accéder à toutes les ressources pédagogiques de la plateforme.</p>
  </div>
  <div class="split-right">
    <div class="form-card">
      <h2>Inscription</h2>
      <form class="form" action="" method="post" novalidate>
        {% csrf_token %}
        <div class="form-group">
          <label for="id_first_name">Nom complet</label>
          <input type="text" name="first_name" id="id_first_name" class="form-control" placeholder="Votre nom complet" aria-label="Nom complet" value="{{ user_form.first_name.value|default:'' }}" required>
          {% if user_form.first_name.errors %}
            <div class="alert alert-error">{{ user_form.first_name.errors.0 }}</div>
          {% endif %}
        </div>
        <div class="form-group">
          <label for="id_email">Adresse email</label>
          <input type="email" name="email" id="id_email" class="form-control" placeholder="Votre adresse email" aria-label="Adresse email" value="{{ user_form.email.value|default:'' }}" required>
          {% if user_form.email.errors %}
            <div class="alert alert-error">{{ user_form.email.errors.0 }}</div>
          {% endif %}
        </div>
        <div class="form-group">
          <label for="id_password">Mot de passe</label>
          <input type="password" name="password" id="id_password" class="form-control" placeholder="Créez un mot de passe" aria-label="Mot de passe" required>
          {% if user_form.password.errors %}
            <div class="alert alert-error">{{ user_form.password.errors.0 }}</div>
          {% endif %}
        </div>
        <div class="form-group">
          <label>Vous êtes</label>
          {% for radio in profile_form.user_type %}
            <label class="radio-inline">
              {{ radio.tag }} {{ radio.choice_label }}
            </label>
          {% endfor %}
          {% if profile_form.user_type.errors %}
            <div class="alert alert-error">{{ profile_form.user_type.errors.0 }}</div>
          {% endif %}
        </div>
        <div class="form-group hidden" id="rollNumberSection">
          <label for="id_roll_number">Numéro d'étudiant</label>
          <input type="text" name="roll_number" id="id_roll_number" class="form-control" placeholder="Numéro d'étudiant (si étudiant)" aria-label="Numéro d'étudiant" value="{{ profile_form.roll_number.value|default:'' }}">
          {% if profile_form.roll_number.errors %}
            <div class="alert alert-error">{{ profile_form.roll_number.errors.0 }}</div>
          {% endif %}
        </div>
        <div class="form-group hidden" id="niveauSection">
          <label for="id_niveau">Niveau d'études</label>
          <select name="niveau" id="id_niveau" class="form-control" aria-label="Niveau d'études">
            <option value="">Sélectionnez votre niveau</option>
            {% for value, label in profile_form.niveau.field.choices %}
              {% if value %}
                <option value="{{ value }}" {% if profile_form.niveau.value == value %}selected{% endif %}>{{ label }}</option>
              {% endif %}
            {% endfor %}
          </select>
          {% if profile_form.niveau.errors %}
            <div class="alert alert-error">{{ profile_form.niveau.errors.0 }}</div>
          {% endif %}
        </div>
        <div class="form-group hidden" id="filiereSection">
          <label for="id_filiere">Filière</label>
          <select name="filiere" id="id_filiere" class="form-control" aria-label="Filière">
            <option value="">Sélectionnez votre filière</option>
            {% for value, label in profile_form.filiere.field.choices %}
              {% if value %}
                <option value="{{ value }}" {% if profile_form.filiere.value == value %}selected{% endif %}>{{ label }}</option>
              {% endif %}
            {% endfor %}
          </select>
          {% if profile_form.filiere.errors %}
            <div class="alert alert-error">{{ profile_form.filiere.errors.0 }}</div>
          {% endif %}
        </div>
        <button type="submit" class="btn btn-primary">S'inscrire</button>
        <div class="text-center mt-1">
          <a href="{% url 'login' %}" class="btn btn-secondary">Déjà un compte ? Se connecter ici</a>
        </div>
      </form>
    </div>
  </div>
</div>
<script src="{% static 'signup.js' %}"></script>
{% endblock %}