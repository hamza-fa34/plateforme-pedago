{% extends 'base.html' %}
{% block title %}Inscription - Plateforme Pédagogique{% endblock %}
{% block content %}
    <div class="container">
        <main class="main-content">
            <h1>Inscription</h1>
            {% if error_message %}
                <div class="alert alert-error">{{ error_message }}</div>
            {% endif %}
            <form class="form" action="{% url 'signup' %}" method="post">
                {% csrf_token %}
                {{ user_form.as_p }}
                {{ profile_form.user_type.label_tag }}
                {{ profile_form.user_type }}
                <div id="rollNumberSection" style="display: none;">
                    {{ profile_form.roll_number.label_tag }}
                    {{ profile_form.roll_number }}
                </div>
                <button type="submit" class="btn btn-primary">Créer le compte</button>
            </form>
            <div class="text-center">
                <a href="{% url 'login' %}" class="btn btn-secondary">Déjà un compte ? Se connecter ici</a>
            </div>
        </main>
    </div>
{% endblock %}

<script>
    // Affiche ou cache le champ "Numéro d'étudiant" selon le rôle choisi
    const userTypeRadios = document.querySelectorAll('input[name="user_type"]');
    const rollNumberSection = document.getElementById('rollNumberSection');

    function toggleRollNumber() {
        if (document.querySelector('input[name="user_type"]:checked').value.toLowerCase() === 'student') {
            rollNumberSection.style.display = 'block';
        } else {
            rollNumberSection.style.display = 'none';
        }
    }

    userTypeRadios.forEach(radio => radio.addEventListener('change', toggleRollNumber));
    
    // Initial check in case of form reload with a value
    if(document.querySelector('input[name="user_type"]:checked')) {
        toggleRollNumber();
    }
</script> 

<style>
    /* Tableaux modernes avec hover et alternance */
    .table-modern {
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .table-modern th {
        background: var(--color-primary);
        color: white;
        padding: 1rem;
        font-weight: 600;
    }

    .table-modern td {
        padding: 1rem;
        border-bottom: 1px solid var(--color-border);
        transition: background 0.2s;
    }

    .table-modern tr:nth-child(even) {
        background: #f8f9fa;
    }

    .table-modern tr:hover {
        background: var(--color-accent);
        color: white;
    }
</style> 